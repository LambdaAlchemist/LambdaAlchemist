#!/usr/bin/bash
# SPDX-License-Identifier: Unlicense
#
# Description:
#     Build and display resume
#
# Author:
#     elf-alchemist
#

# Exit early, instead of failing later
set -euo pipefail

if ! command -v groff &> /dev/null; then
	echo >&2 "Error: groff not found, please install groff."
	echo >&2 "Make sure you have the ms macros installed aswell."
	exit 1
fi

# Modify this acording to your own organization style
XDG_DATA_HOME="${XDG_DATA_HOME:-"${HOME}/.local/share"}"
GIT_PATH="${XDG_DATA_HOME}/git"
RESUME_DIR="${GIT_PATH}/elf-alchemist"
RESUME_PDF="${RESUME_DIR}/resume.pdf"
RESUME_MS="${RESUME_DIR}/resume.ms"

groff -ms -T pdf -tle "${RESUME_MS}" > "${RESUME_PDF}"

if ! command -v zathura &> /dev/null; then
	echo >&2 "Error: zathura not found cannot auto open."
	exit 0
fi

zathura "${RESUME_PDF}"

