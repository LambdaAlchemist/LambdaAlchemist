#!/usr/bin/env bash
# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: Copyright 2024 Guilherme M. Miranda <alchemist.software@proton.me>

export DOOMWADDIR="${XDG_DATA_HOME}/doom"
export DOOMWADPATH="${DOOMWADDIR}/04-final:${DOOMWADDIR}/03-ultimate:${DOOMWADDIR}/02-hell-on-earth:${DOOMWADDIR}/01-evil-unleashed"
export DOOMWADPATH="${DOOMWADDIR}/99-master:${DOOMWADDIR}/12-zdoom:${DOOMWADDIR}/11-dehacked:${DOOMWADDIR}/10-vanilla:${DOOMWADPATH}"
export SF2_SOUNDFONT="${XDG_DATA_HOME}/soundfonts/SCC1.sf2"

alias cdoom="cd "${DOOMWADDIR}""
alias woof="woof -verbose -shotdir ${HOME}/Pictures/Woof"

alias doom1="woof -iwad doom -gameversion 1.9"
alias doomu="woof -iwad doom -gameversion ultimate"
alias doom2="woof -iwad doom2 -gameversion 1.9"
alias doomtnt="woof -iwad tnt -gameversion final"
alias doomplut="woof -iwad plutonia -gameversion final"

alias woofchex="woof -iwad chex3v -gameversion ultimate"
alias woofhacx="woof -iwad hacx -gameversion final"

alias fdoom1="woof -iwad freedoom1 -gameversion 1.9"
alias fdoomu="woof -iwad freedoom1 -gameversion ultimate"
alias fdoom2="woof -iwad freedoom2 -gameversion 1.9"
alias fdoomfinal="woof -iwad freedoom2 -gameversion final"

alias doom2nerve="woof -file 02-hell-on-earth/nerve.wad"
alias doom2nrftl="woof -file 02-hell-on-earth/nrftl.wad"

alias master="woof -file 99-master/masterpack.wad"
alias master-vanilla="woof -file 99-master/masterpack-vanilla.wad"
alias master-freedoom="woof -file 99-master/masterpack-freedoom.wad"
alias master-psx="woof -file 99-master/masterpack-psx.wad"



function batch_render_midi() {
	for mid_file in *.mid; do
		# simple render midi to wav
		fluidsynth                        \
			-ni "${SF2_SOUNDFONT}"    \
			"${mid_file}"             \
			-F "${mid_file%.mid}".wav \
			-r 44100;
		# convert wav to ogg
		ffmpeg                            \
			-i "${mid_file%.mid}".wav \
			-b:a 64k                  \
			-af "volume=10dB"         \
			"${mid_file%.mid}".ogg    \
			-y;
		# clean up
		rm "${mid_file%.mid}".wav;
	done
}

